<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<AnchorPane minHeight="550.4" minWidth="800.0" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.final_project_404.StudentPortalController">
    <children>
        <!-- ===== Header ===== -->
        <HBox fx:id="headerHBox" prefHeight="80.0" prefWidth="800.0" styleClass="header" stylesheets="@EmployeePortal.css">
            <children>
                <Label styleClass="header-title" text="Student Portal" />
            </children>
        </HBox>

        <!-- ===== Main Container ===== -->
        <VBox fx:id="containerBarVBox" layoutY="80.0" prefHeight="470.0" prefWidth="800.0" style="-fx-background-color: linear-gradient(from 100% 100% to 0% 0%, #00a1ffb1 0%, #ffffff 100%);" stylesheets="@EmployeePortal.css">
            <padding>
                <Insets bottom="20" left="20" right="20" top="20" />
            </padding>
            <children>
                <!-- ===== Welcome Label ===== -->
                <Label maxWidth="Infinity" styleClass="label-title" text="Welcome, Student!">
                    <VBox.margin>
                        <Insets bottom="20" left="0" right="0" top="0" />
                    </VBox.margin>
                </Label>

                <!-- ===== Main Menu Grid ===== -->
                <GridPane fx:id="mainMenuPane" prefHeight="370.0" prefWidth="760.0">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="379.0" />
                        <ColumnConstraints hgrow="SOMETIMES" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints prefHeight="50.0" vgrow="SOMETIMES" />
                        <RowConstraints prefHeight="50.0" vgrow="SOMETIMES" />
                        <RowConstraints prefHeight="50.0" vgrow="SOMETIMES" />
                        <RowConstraints prefHeight="50.0" vgrow="SOMETIMES" />
                    </rowConstraints>
                    <children>
                        <!-- Buttons -->
                        <Button minHeight="40.0" minWidth="280.0" onAction="#EnrollmentStudentPortal" styleClass="button-dashboard" stylesheets="@DashboardButton.css" text="Enrollment" GridPane.halignment="CENTER" />
                        <Button minHeight="40.0" minWidth="280.0" onAction="#profileStudentPortal" styleClass="button-dashboard" stylesheets="@DashboardButton.css" text="Profile" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.rowIndex="0" />
                        <Button minHeight="40.0" minWidth="280.0" onAction="#reportsStudentPortal" styleClass="button-dashboard" stylesheets="@DashboardButton.css" text="Reports" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.rowIndex="2" />
                        <Button minHeight="40.0" minWidth="280.0" onAction="#showReportCardPane" styleClass="button-dashboard" stylesheets="@DashboardButton.css" text="See Report Card" GridPane.halignment="CENTER" GridPane.rowIndex="1" />
                        <Button minHeight="40.0" minWidth="280.0" onAction="#showOverallReportCardPane" styleClass="button-dashboard" stylesheets="@DashboardButton.css" text="Overall Report Card" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.rowIndex="1" />
                        <Button minHeight="40.0" minWidth="280.0" onAction="#showEmergencyDropPane" styleClass="button-dashboard" stylesheets="@DashboardButton.css" text="Emergency Drop" GridPane.halignment="CENTER" GridPane.rowIndex="2" />
                        <Button minHeight="40.0" minWidth="280.0" onAction="#signOutStudentPortal" styleClass="button-dashboard" stylesheets="@DashboardButton.css" text="Sign out" GridPane.halignment="CENTER" GridPane.rowIndex="3" />
                    </children>
                </GridPane>

                <!-- ===== Report Card Panel (Hidden by default) ===== -->
                <AnchorPane fx:id="reportCardPane" managed="false" prefHeight="370.0" prefWidth="760.0" visible="false">
                    <children>
                        <VBox prefHeight="370.0" prefWidth="760.0" spacing="10" style="-fx-background-color: #f7f9fc;">
                            <padding>
                                <Insets bottom="15" left="15" right="15" top="15" />
                            </padding>
                            <children>
                                <GridPane hgap="10" prefWidth="730.0" vgap="5">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="150.0" />
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="200.0" />
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="150.0" />
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="200.0" />
                                    </columnConstraints>
                                    <rowConstraints>
                                        <RowConstraints vgrow="SOMETIMES" />
                                        <RowConstraints vgrow="SOMETIMES" />
                                        <RowConstraints vgrow="SOMETIMES" />
                                    </rowConstraints>
                                    <children>
                                        <Label style="-fx-font-weight: bold;" text="Student Name:" />
                                        <Label fx:id="studentNameLabel" GridPane.columnIndex="1" />
                                        <Label style="-fx-font-weight: bold;" text="Semester:" GridPane.columnIndex="2" />
                                        <Label fx:id="semesterLabel" GridPane.columnIndex="3" />
                                        <Label style="-fx-font-weight: bold;" text="GPA:" GridPane.rowIndex="1" />
                                        <Label fx:id="gpaLabel" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                        <Label style="-fx-font-weight: bold;" text="Status:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                        <Label fx:id="probationStatusLabel" GridPane.columnIndex="3" GridPane.rowIndex="1" />
                                        <Label style="-fx-font-weight: bold;" text="Passed Units:" GridPane.rowIndex="2" />
                                        <Label fx:id="passedUnitsLabel" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                        <Label style="-fx-font-weight: bold;" text="Failed Units:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                                        <Label fx:id="failedUnitsLabel" GridPane.columnIndex="3" GridPane.rowIndex="2" />
                                    </children>
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </GridPane>
                                <HBox prefHeight="40.0" spacing="10">
                                    <ComboBox fx:id="semesterComboBox" prefWidth="200.0" promptText="Select Semester" />
                                    <Button onAction="#loadReportCard" text="Load Report" />
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </HBox>
                                <TableView fx:id="reportCardTable" prefHeight="200.0" prefWidth="730.0" stylesheets="@TableViewStyle.css">
                                    <columns>
                                        <TableColumn fx:id="courseNameCol" prefWidth="250.0" text="Course Name" />
                                        <TableColumn fx:id="scoreCol" prefWidth="100.0" text="Score" />
                                        <TableColumn fx:id="statusCol" prefWidth="100.0" text="Status" />
                                    </columns>
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </TableView>
                                <HBox alignment="CENTER_RIGHT" prefHeight="40.0">
                                    <Button onAction="#showMainMenuPane" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="Back" />
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </HBox>
                                <Label fx:id="messageLabel" style="-fx-text-fill: red;" />
                            </children>
                        </VBox>
                    </children>
                </AnchorPane>

                <!-- ===== Overall Report Card Panel (Hidden by default) ===== -->
                <AnchorPane fx:id="overallReportCardPane" managed="false" prefHeight="370.0" prefWidth="760.0" visible="false">
                    <children>
                        <VBox prefHeight="370.0" prefWidth="760.0" spacing="10" style="-fx-background-color: #f7f9fc;">
                            <padding>
                                <Insets bottom="15" left="15" right="15" top="15" />
                            </padding>
                            <children>
                                <Label styleClass="label-title" text="Overall Report Card">
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </Label>
                                <GridPane hgap="10" prefWidth="730.0" vgap="5">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="150.0" />
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="200.0" />
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="150.0" />
                                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="200.0" />
                                    </columnConstraints>
                                    <rowConstraints>
                                        <RowConstraints vgrow="SOMETIMES" />
                                        <RowConstraints vgrow="SOMETIMES" />
                                        <RowConstraints vgrow="SOMETIMES" />
                                    </rowConstraints>
                                    <children>
                                        <Label fx:id="overallStudentNameLabel" style="-fx-font-weight: bold;" text="Student Name:" />
                                        <Label fx:id="overallGpaLabel" style="-fx-font-weight: bold;" text="GPA:" GridPane.columnIndex="2" />
                                        <Label fx:id="overallProbationCountLabel" style="-fx-font-weight: bold;" text="Probation Terms:" GridPane.rowIndex="1" />
                                        <Label fx:id="overallTotalTermsLabel" style="-fx-font-weight: bold;" text="Total Terms:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                        <Label fx:id="overallPassedUnitsLabel" style="-fx-font-weight: bold;" text="Passed Units:" GridPane.rowIndex="2" />
                                        <Label fx:id="overallFailedUnitsLabel" style="-fx-font-weight: bold;" text="Failed Units:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                                    </children>
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </GridPane>
                                <TableView fx:id="overallReportTable" prefHeight="200.0" prefWidth="730.0" stylesheets="@TableViewStyle.css">
                                    <columns>
                                        <TableColumn fx:id="overallSemesterCol" prefWidth="150.0" text="Semester" />
                                        <TableColumn fx:id="overallCourseCol" prefWidth="250.0" text="Course Name" />
                                        <TableColumn fx:id="overallScoreCol" prefWidth="100.0" text="Score" />
                                        <TableColumn fx:id="overallStatusCol" prefWidth="100.0" text="Status" />
                                    </columns>
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </TableView>
                                <HBox alignment="CENTER_RIGHT" prefHeight="40.0">
                                    <Button onAction="#showMainMenuPane" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="Back" />
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </HBox>
                                <Label fx:id="overallMessageLabel" style="-fx-text-fill: red;" />
                            </children>
                        </VBox>
                    </children>
                </AnchorPane>

                <!-- ===== Emergency Drop Panel (Hidden by default) ===== -->
                <!-- ===== Emergency Drop Panel (Hidden by default) ===== -->
                <AnchorPane fx:id="emergencyDropPane" managed="false" prefHeight="370.0" prefWidth="760.0" visible="false">
                    <children>
                        <VBox prefHeight="370.0" prefWidth="760.0" spacing="10" style="-fx-background-color: #f7f9fc;">
                            <padding>
                                <Insets bottom="15" left="15" right="15" top="15" />
                            </padding>
                            <children>
                                <!-- Title -->
                                <Label styleClass="label-title" text="Emergency Drop">
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </Label>
                                <!-- Semester Selection and Search -->
                                <HBox prefHeight="40.0" spacing="10">
                                    <ComboBox fx:id="emergencyDropSemesterComboBox" prefWidth="200.0" promptText="Select Active Semester" />
                                    <Button onAction="#loadCoursesForSemester" text="Search" style="-fx-background-color: #2196F3; -fx-text-fill: white;" />
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </HBox>
                                <!-- Courses Table -->
                                <TableView fx:id="emergencyDropTable" prefHeight="200.0" prefWidth="730.0" stylesheets="@TableViewStyle.css">
                                    <columns>
                                        <TableColumn fx:id="emergencyDropCourseNameCol" prefWidth="200.0" text="Course Name" />
                                        <TableColumn fx:id="emergencyDropCourseCodeCol" prefWidth="100.0" text="Course Code" />
                                        <TableColumn fx:id="emergencyDropProfessorNameCol" prefWidth="200.0" text="Professor Name" />
                                        <TableColumn fx:id="emergencyDropUnitsCol" prefWidth="100.0" text="Units" />
                                        <TableColumn fx:id="emergencyDropActionCol" prefWidth="100.0" text="Action" />
                                    </columns>
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </TableView>
                                <!-- Back Button -->
                                <HBox alignment="CENTER_RIGHT" prefHeight="40.0">
                                    <Button onAction="#showMainMenuPane" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="Back" />
                                    <VBox.margin>
                                        <Insets bottom="10" left="0" right="0" top="0" />
                                    </VBox.margin>
                                </HBox>
                                <!-- Message -->
                                <Label fx:id="emergencyDropMessageLabel" style="-fx-text-fill: red;" />
                            </children>
                        </VBox>
                    </children>
                </AnchorPane>
            </children>
        </VBox>
    </children>
</AnchorPane>
